{"version":3,"sources":["file:///C:/Users/14416/Desktop/gameassets/cocos-start-demo-master/assets/scripts/tile/tileManage.ts"],"names":["_decorator","Component","Tile","createUINode","getRandomSeed","DataManage","ResourceManage","ccclass","property","tileManage","init","mapInfo","Instance","spriteAssets","loadRes","i","length","column","j","item","src","type","imgSrc","spriteFrame","find","v","name","node","tile","addComponent","setParent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,I,iBAAAA,I;;AACAC,MAAAA,Y,iBAAAA,Y;AAAcC,MAAAA,a,iBAAAA,a;;AAChBC,MAAAA,U;;AACAC,MAAAA,c;;;;;;;OACD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;4BAGjBS,U,WADZF,OAAO,CAAC,YAAD,C,gBAAR,MACaE,UADb,SACgCR,SADhC,CAC0C;AAEhCS,QAAAA,IAAI,GAAE;AAAA;;AAAA;AACR,gBAAM;AAAEC,cAAAA;AAAF,gBAAc;AAAA;AAAA,0CAAWC,QAA/B,CADQ,CAER;;AACA,gBAAMC,YAAY,SAAS;AAAA;AAAA,kDAAeD,QAAf,CAAwBE,OAAxB,CAAgC,mBAAhC,CAA3B;;AAEA,iBAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAEJ,OAAO,CAACK,MAA1B,EAAkCD,CAAC,EAAnC,EAAsC;AAClC,kBAAME,MAAM,GAAGN,OAAO,CAACI,CAAD,CAAtB;;AADkC,yCAE1BG,CAF0B;AAG9B,oBAAMC,IAAI,GAAGF,MAAM,CAACC,CAAD,CAAnB;;AACA,oBAAGC,IAAI,CAACC,GAAL,KAAa,IAAb,IAAqBD,IAAI,CAACE,IAAL,KAAc,IAAtC,EAA2C;AACvC;AACH;;AAED,oBAAID,GAAG,GAAGD,IAAI,CAACC,GAAf;;AACA,oBAAG,CAACA,GAAG,KAAK,CAAR,IAAaA,GAAG,KAAK,CAArB,IAA0BA,GAAG,KAAK,CAAnC,KAA0CL,CAAC,GAAC,CAAF,KAAQ,CAAR,IAAaG,CAAC,GAAC,CAAF,KAAQ,CAAlE,EAAqE;AACjEE,kBAAAA,GAAG,IAAI;AAAA;AAAA,sDAAc,CAAd,EAAgB,CAAhB,CAAP;AACH;;AACD,oBAAME,MAAM,cAAYF,GAAZ,MAAZ;AACA,oBAAMG,WAAW,GAAGV,YAAY,CAACW,IAAb,CAAkBC,CAAC,IAAEA,CAAC,CAACC,IAAF,KAAWJ,MAAhC,CAApB;AACA,oBAAMK,IAAI,GAAG;AAAA;AAAA,mDAAb;AACA,oBAAMC,IAAI,GAAGD,IAAI,CAACE,YAAL;AAAA;AAAA,iCAAb;AACAD,gBAAAA,IAAI,CAAClB,IAAL,CAAUa,WAAV,EAAsBR,CAAtB,EAAwBG,CAAxB;AACAS,gBAAAA,IAAI,CAACG,SAAL,CAAe,KAAI,CAACH,IAApB;AAjB8B;;AAElC,mBAAI,IAAIT,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGD,MAAM,CAACD,MAA1B,EAAkCE,CAAC,EAAnC,EAAsC;AAAA,iCAA9BA,CAA8B;;AAAA,yCAG9B;AAaP;AACJ;AAxBO;AAyBX;;AA3BqC,O","sourcesContent":["\nimport { _decorator, Component } from 'cc';\nimport { Tile } from 'db://assets/scripts/tile/tile';\nimport { createUINode, getRandomSeed } from 'db://assets/utils/index';\nimport DataManage from 'db://assets/runtime/dataManage';\nimport ResourceManage from '../../runtime/resourceManage';\nconst { ccclass, property } = _decorator;\n\n@ccclass('tileManage')\nexport class tileManage extends Component {\n\n    async init(){\n        const { mapInfo } = DataManage.Instance;\n        // 加载资源目录所有精灵图片\n        const spriteAssets = await ResourceManage.Instance.loadRes('texture/tile/tile');\n\n        for(let i = 0; i< mapInfo.length; i++){\n            const column = mapInfo[i];\n            for(let j = 0; j < column.length; j++){\n                const item = column[j];\n                if(item.src === null || item.type === null){\n                    continue;\n                }\n\n                let src = item.src;\n                if((src === 1 || src === 5 || src === 9) && (i%2 === 0 && j%2 === 0)){\n                    src += getRandomSeed(0,4);\n                }\n                const imgSrc = `tile (${src})`;\n                const spriteFrame = spriteAssets.find(v=>v.name === imgSrc);\n                const node = createUINode();\n                const tile = node.addComponent(Tile);\n                tile.init(spriteFrame,i,j);\n                node.setParent(this.node);\n            }\n        }\n    }\n}\n"]}