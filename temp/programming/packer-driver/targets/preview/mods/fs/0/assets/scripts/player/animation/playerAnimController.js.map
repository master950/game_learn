{"version":3,"sources":["file:///C:/Users/14416/Desktop/gameassets/cocos-start-demo-master/assets/scripts/player/animation/playerAnimController.ts"],"names":["_decorator","Animation","AnimationClip","Component","PlayerStateMachine","PlayerIdle","PlayerTurnLeft","EventManage","ANIM_NAME","DIRECTION","EVENT_NAME","ccclass","property","PlayerAnimController","onLoad","stateMachine","playerIdle","WrapMode","Loop","playerTurnLeft","Normal","animComp","node","getComponent","Instance","on","PLAYERANIM","playAnim","type","IDLE","idle","TURNLEFT","turnLeft","dir","TOP","direction","changeState","start","initialize","update","dt","currState"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,a,OAAAA,a;AAAeC,MAAAA,S,OAAAA,S;;AACtCC,MAAAA,kB,iBAAAA,kB;;AACAC,MAAAA,U,iBAAAA,U;AAAWC,MAAAA,c,iBAAAA,c;;AACbC,MAAAA,W;;AACEC,MAAAA,S,iBAAAA,S;AAAWC,MAAAA,S,iBAAAA,S;AAAWC,MAAAA,U,iBAAAA,U;;;;;;;OACzB;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBZ,U;;sCAGjBa,oB,WADZF,OAAO,CAAC,sBAAD,C,yBAAR,MACaE,oBADb,SAC0CV,SAD1C,CACoD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAOtCW,QAAAA,MAAM,GAAS;AACrB,eAAKC,YAAL,GAAoB;AAAA;AAAA,yDAApB;AACA,eAAKC,UAAL,GAAkB;AAAA;AAAA,wCAAe,KAAKD,YAApB,EAAiC,IAAjC,EAAsC,yBAAtC,EAAgEb,aAAa,CAACe,QAAd,CAAuBC,IAAvF,EAA4F,MAA5F,CAAlB;AACA,eAAKC,cAAL,GAAsB;AAAA;AAAA,gDAAmB,KAAKJ,YAAxB,EAAqC,IAArC,EAA0C,6BAA1C,EAAwEb,aAAa,CAACe,QAAd,CAAuBG,MAA/F,EAAsG,UAAtG,CAAtB;AACA,eAAKC,QAAL,GAAgB,KAAKC,IAAL,CAAUC,YAAV,CAAkCtB,SAAlC,CAAhB;AACA;AAAA;AAAA,0CAAYuB,QAAZ,CAAqBC,EAArB,CAAwB;AAAA;AAAA,wCAAWC,UAAnC,EAA+C,KAAKC,QAApD,EAA8D,IAA9D;AACH;;AAEDA,QAAAA,QAAQ,CAACC,IAAD,EAAiB;AACrB,kBAAOA,IAAP;AACI,iBAAK;AAAA;AAAA,wCAAUC,IAAf;AACI,mBAAKC,IAAL;AACA;;AACJ,iBAAK;AAAA;AAAA,wCAAUC,QAAf;AACI,mBAAKC,QAAL;AACA;AANR;AAQH;;AAEDF,QAAAA,IAAI,CAACG,GAAD,EAAgC;AAAA,cAA/BA,GAA+B;AAA/BA,YAAAA,GAA+B,GAAd;AAAA;AAAA,wCAAUC,GAAI;AAAA;;AAChC,eAAKlB,UAAL,CAAgBmB,SAAhB,GAA4BF,GAA5B;AACF;;AAEFD,QAAAA,QAAQ,GAAE;AACN,eAAKjB,YAAL,CAAkBqB,WAAlB,CAA8B,KAAKjB,cAAnC;AACF;;AAEFkB,QAAAA,KAAK,GAAI;AACL,eAAKtB,YAAL,CAAkBuB,UAAlB,CAA6B,KAAKtB,UAAlC;AACH;;AAESuB,QAAAA,MAAM,CAACC,EAAD,EAAmB;AAC/B,eAAKzB,YAAL,CAAkB0B,SAAlB,CAA4BF,MAA5B;AACH;;AAxC+C,O","sourcesContent":["import { _decorator, Animation, AnimationClip, Component } from 'cc';\nimport { PlayerStateMachine } from 'db://assets/scripts/player/animation/playerStateMachine';\nimport { PlayerIdle,PlayerTurnLeft } from 'db://assets/scripts/player/animation';\nimport EventManage from 'db://assets/runtime/eventManage';\nimport { ANIM_NAME, DIRECTION, EVENT_NAME } from 'db://assets/Enum';\nconst { ccclass, property } = _decorator;\n\n@ccclass('PlayerAnimController')\nexport class PlayerAnimController extends Component {\n\n    public stateMachine: PlayerStateMachine;\n    public playerIdle: PlayerIdle;\n    public playerTurnLeft: PlayerTurnLeft;\n    public animComp: Animation;\n\n    protected onLoad(): void {\n        this.stateMachine = new PlayerStateMachine();\n        this.playerIdle = new PlayerIdle(this.stateMachine,this,'texture/player/idle/top',AnimationClip.WrapMode.Loop,'idle');\n        this.playerTurnLeft = new PlayerTurnLeft(this.stateMachine,this,'texture/player/turnleft/top',AnimationClip.WrapMode.Normal,'turnleft');\n        this.animComp = this.node.getComponent<Animation>(Animation);\n        EventManage.Instance.on(EVENT_NAME.PLAYERANIM, this.playAnim, this);\n    }\n\n    playAnim(type: ANIM_NAME){\n        switch(type){\n            case ANIM_NAME.IDLE:\n                this.idle();\n                break;\n            case ANIM_NAME.TURNLEFT:\n                this.turnLeft();\n                break;\n        }\n    }\n\n    idle(dir: DIRECTION = DIRECTION.TOP){\n        this.playerIdle.direction = dir;\n     }\n\n    turnLeft(){\n        this.stateMachine.changeState(this.playerTurnLeft);\n     }\n\n    start () {\n        this.stateMachine.initialize(this.playerIdle);\n    }\n\n    protected update(dt: number): void {\n        this.stateMachine.currState.update();\n    }\n}\n"]}