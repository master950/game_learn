{"version":3,"sources":["file:///C:/Users/14416/Desktop/gameassets/cocos-start-demo-master/assets/scripts/player/playerManage.ts"],"names":["_decorator","Component","Animation","Sprite","UITransform","TILE_HEIGHT","TILE_WIDTH","EVENT_NAME","INPUT_ENUM","EventManage","PlayerAnimController","ccclass","property","PlayerManage","update","dt","updateXY","node","setPosition","x","y","init","renderFunc","Instance","on","PLAYERCTRL","move","disX","speed","disY","Math","abs","playerDiret","TOP","BOTTOM","LEFT","RIGHT","sprite","addComponent","sizeMode","SizeMode","CUSTOM","uiTransform","getComponent","setContentSize"],"mappings":"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","sourcesContent":["import { _decorator, Component, Animation, Sprite, UITransform } from 'cc';\nimport { TILE_HEIGHT, TILE_WIDTH } from 'db://assets/scripts/tile/tile';\nimport { DIRECTION, EVENT_NAME, INPUT_ENUM } from 'db://assets/Enum';\nimport EventManage from 'db://assets/runtime/eventManage';\nimport { PlayerAnimController } from 'db://assets/scripts/player/animation/playerAnimController';\nconst { ccclass, property } = _decorator;\n\n@ccclass('PlayerManage')\nexport class PlayerManage extends Component {\n\n  x: number = 0;\n  y: number = 0;\n  disX: number = 0;\n  disY: number = 0;\n  private readonly speed = 1 / 10;\n\n  protected update(dt: number): void {\n      this.updateXY();\n      this.node.setPosition(this.x * TILE_WIDTH - TILE_WIDTH * 1.5, this.y * TILE_HEIGHT + TILE_HEIGHT * 1.5)\n  }\n\n  init(){\n    this.renderFunc();\n    EventManage.Instance.on(EVENT_NAME.PLAYERCTRL, this.move, this);\n  }\n\n  updateXY(){\n    if(this.x > this.disX){\n      this.x -= this.speed;\n    }else if(this.x < this.disX){\n      this.x += this.speed;\n    }else if(this.y > this.disY){\n      this.y -= this.speed;\n    }else if(this.y < this.disY){\n      this.y += this.speed;\n    }\n\n    if(Math.abs(this.x - this.disX) <= 0.1 && Math.abs(this.y - this.disY) <= 0.1){\n      this.x = this.disX;\n      this.y = this.disY;\n    }\n  }\n\n  move(playerDiret: INPUT_ENUM){\n    if(playerDiret === INPUT_ENUM.TOP){\n      this.disY += 1;\n    }else if(playerDiret === INPUT_ENUM.BOTTOM){\n      this.disY -= 1;\n    }else if(playerDiret === INPUT_ENUM.LEFT){\n      this.disX -= 1;\n    }else if(playerDiret === INPUT_ENUM.RIGHT){\n      this.disX += 1;\n    }\n  }\n\n  renderFunc(){\n    const sprite = this.node.addComponent(Sprite);\n    sprite.sizeMode = Sprite.SizeMode.CUSTOM;\n\n    const uiTransform = this.node.getComponent(UITransform);\n    uiTransform.setContentSize(TILE_WIDTH * 4, TILE_HEIGHT * 4);\n\n    this.node.addComponent(Animation)\n    this.node.addComponent(PlayerAnimController);\n  }\n}\n"]}